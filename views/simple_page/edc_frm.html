<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>edc-frm</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <link rel="stylesheet" href="../../css/common.css">
    <style type="text/css">
        body {
            height: auto;
            min-height: 100%;
        }
        .common-part-service {

        }

        .whats-this {
            background-color: #F0F0F0;
            padding-top: 1.5rem;
        }

        .whats-this .this-name {
            font-size: 1.5rem;
            line-height: 2.5rem;
            color: #000000;
            background: url(../../image/project/icon_edc.png) 1rem 50% no-repeat;
            background-size: 2.5rem 2.5rem;
            text-indent: 4rem;
        }

        .whats-this .this-description {
            padding: 0.8rem 2.2rem 1rem 4rem;
            font-size: 1.3rem;
            line-height: 1.6rem;
            color: #515458;
            border-bottom: 0.2rem solid #C8C8C8;
        }

        .whats-this .design {
            padding-left: 4rem;
        }

        .whats-this .text, .whats-this .designer {
            font-size: 1.2rem;
            line-height: 2.6rem;
            color: #000000;
        }

        .whats-this .rank {

        }

        .whats-this .stars {
            color: #999999;
            font-size: 1.8rem;
            vertical-align: bottom;
            line-height: 2.6rem;
        }

        .whats-this .stars .fa-star {
            color: #FFDA00;
        }

        /*已选择的项目*/
        .project-header {
            padding: 0 1rem;
            background-color: #FFFFFF;
        }

        .project-header label {
            font-size: 1.6rem;
            line-height: 5.5rem;
        }

        .header-inner {
            /*width: 33.9rem;*/
            height: 8.4rem;
            border: 0.1rem solid #005BBC;
            border-radius: 0.6rem;
            position: relative;
        }

        .header-inner-img {
            position: absolute;
            left: 50%;
            margin-left: -1.6rem;
            top: -1.6rem;
            width: 3.2rem;
            height: 3.2rem;
            background: #FFFFFF url(../../image/project/project_list_icon.png) center center no-repeat;
            background-size: 1.9rem 2.2rem;
        }

        .header-inner .name {
            font-size: 1.5rem;
            color: #005BBC;
            text-align: center;
            line-height: 3rem;
            padding-top: 1.3rem;
            font-weight: bold;
        }

        .header-inner .date-group {
            position: absolute;
            left: 0;
            bottom: 0;
        }

        .header-inner .date-group .text, .header-inner .date-group .date {
            font-size: 1.2rem;
            line-height: 2.1rem;
            color: #000000;
            padding-left: 1rem;
        }

        .header-inner .date-counting {
            width: 11.7rem;
            margin: 0 auto;
            text-align: center;
            color: #F7AA00;
            font-size: 1.2rem;
        }

        .header-inner .date-counting .count {
            font-size: 2.8rem;
            line-height: 4rem;
        }

        .header-inner .project-state {
            position: absolute;
            right: 0;
            bottom: 0.6rem;
            font-size: 1.2rem;
            line-height: 2rem;
            padding-right: 0.5rem;
        }

        .project-header .create-group {
            font-size: 1.3rem;
            line-height: 4.5rem;
            text-align: right;
            color: #595C60;
        }

        .project-header .create-group .btn-create {
            background-color: #0071C5;
            border-radius: 0.3rem;
            width: 10.9rem;
            height: 2.8rem;
            color: #FFFFFF;
            text-align: center;
            line-height: 2.8rem;
        }

        /*大体上通用的部分 end*/
        .propose-title {
            height: 3.7rem;
            line-height: 3.7rem;
            font-size: 1.5rem;
            background-color: #DBF0FF;
            color: #0271C5;
            background-image: url("../../image/project/icon_quote_right.png");
            background-position-x: 1rem;
            background-position-y: center;
            background-repeat: no-repeat;
            background-size: 2rem;
            padding-left: 3.8rem;
            font-weight: bold;
        }
        .form{
			padding-left: 1rem;
			background-color: #FFFFFF;
        }
        .form.no-padded{
        	padding-left: 0;
        	background-color: transparent;
        }
        .form .form-title{
			height: 2.8rem;
			line-height: 2.8rem;
			color: #0271C5;
			background-color: #F0F0F0;
			font-size: 1.3rem;
			text-indent: 1rem;
        }
        .form .form-title-desc{
        	color: #000000;
		    font-size: 1.1rem;
		    padding: 1rem;
		    line-height: 1.4rem;
        }
		.form .form-group{
			background-color: #FFFFFF;
            border-top: 0.1rem solid #DEDEDE;
            overflow: hidden;
		}
		.form.no-padded .form-group{
			padding-left: 1rem;
		}
		.form .form-group label{
			height: 3.8rem;
			line-height: 3.8rem;
			width: 15rem;
			text-indent: 1.5rem;
			font-size: 1.4rem;
			color: #000000;
		}
		.form.no-padded .form-group label{
			text-indent: 0;
		}
		.form .form-group label.important{
			position: relative;
		}
		.form .form-group label.important:before{
			content: '*';
			position: absolute;
			left: 0;
			top: 0.2rem;
			color: #F35C2C;
			text-align: left;
			text-indent: 0;
		}
		.form .form-group .form-text-right{
			text-align: right;
			float: right;
			margin-right: 2rem;
			height: 3.8rem;
			line-height: 3.8rem;
			font-size: 1.4rem;
			color: #C9C9CF;
			width: 17.5rem;
		}
        /*.form .form-group input.form-text-right{
            color: #333333;
        }
        .form .form-group input.form-text-right[disabled]{
            color: #666666;
        }*/
		.form .current-board{
			height: 3rem;
			line-height: 3rem;
			padding: 0 1rem;
			font-size: 1.1rem;
			color: #5B5E61;
		}
		.fake-link{
			color: #0071C5;
			text-decoration: underline;
		}
		.form .current-board .fake-link{
			font-size: 1.1rem;
			line-height: 3rem;
			margin-left: 2.3rem;
		}
		.form .radio-group{
			padding-top: 1.4rem;
		}
		.form .radio-group .radio-title{
			height: 3rem;
			line-height: 3rem;
			padding: 0 1rem;
			font-size: 1.1rem;
			color: #5B5E61;
		}

		/*radio*/
		.propose-select, .fileuploadLabel {
		    padding-left: 10px;
		    font-size: 1.6rem;
		    position: relative;
		}
		.radioSwitch.show {
		    background-image: url('../../image/project/promotion_circle_highlight.png');
		}
		.radioSwitch {
		    width: 7.7rem;
		    background-image: url('../../image/project/promotion_circle_normal.png');
		    background-size: 1.5rem;
		    background-repeat: no-repeat;
		    background-position: left center;
		    line-height: 4.5rem;
		    font-size: 1rem;
		    text-indent: 2rem;
		}
		.show.selectSwitch {
		    background-image: url('../../image/project/MCSI_Selected2.png');
		    background-size: 2rem 1.8rem;
    		background-position: 0 44%;
		}
		.selectSwitch {
		    background-image: url('../../image/project/MCSI_Selected1.png');
		    background-size: 1.5rem;
		    background-repeat: no-repeat;
		    background-position: 0 50%;
		    font-size: 1.1rem;
		    color: #5B5E61;
		    padding: 0.7rem 2rem;
		    display: inline-block;
		}
		.propose-select .fake-link{
			text-decoration: none;
			font-size: 1.1rem;
		}

		label.fake-link{
			text-decoration: none;
			font-size: 1.4rem;
			line-height: 2.5rem;
			height: 2.5rem;
			text-indent: 1rem;
		}
		/*radio*/

		.btn-submit{
			width: 18rem;
			height: 3.8rem;
			margin: 3rem auto;
			text-align: center;
			color: #FFFFFF;
			background-color: #0071C5;
			border-radius: 0.4rem;
			line-height: 3.8rem;
			font-size: 1.6rem;
		}
		p.fake-link{
			font-size: 1.1rem;
			padding: 0 1rem;
			text-decoration: none;
			line-height: 1.4rem;
		}
		
		.clause-box{
			padding: 1rem;
			margin-top: 1.5rem;
		}
		.clause-box p{
		    color: #000000;
		    font-size: 1.1rem;
		    line-height: 1.4rem;
		}
		.clause-box .fake-link{
			text-decoration: none;
			font-size: 1.1rem;
		}

        
        .form .form-group .edc-contact{
            width: 25rem;
        }
    </style>
</head>
<body>
<div class="common-part-service">
    
    <div class="whats-this">
        <p class="this-name">
        	Open EDC A/C
        </p>

        <p class="this-description">
            Accede to EDC Account, the cooperation partner of Intel Intelligent Computer Systems can convenience download the published  Intel Tech Doc 
including schematic diagram, reference manual and design manual etc. Apply CPU and chipsets sample and reference edition.
        </p>

        <div class="design">
            <span class="text">Designer：</span>
				<span class="designer">
					
				</span>

            <div class="rank">
                <span class="text">Satisfaction</span>
					<span class="stars">
	                    <!-- <i class="fa-star fa"></i>
	                    <i class="fa-star fa"></i>
	                    <i class="fa-star fa"></i>
	                    <i class="fa-star fa"></i>
	                    <i class="fa-star fa"></i> -->
	                </span>
                <span class="text"></span>
            </div>
        </div>
    </div>
    <!-- 已选择的项目 -->
    <div class="project-header">
        <label>The project you have selected：</label>

        <div class="header-inner">
            <div class="header-inner-img"></div>
            <p class="name"></p>

            <div class="header-bottom">
                <div class="date-group">
                    <p class="text">Project starts at</p>

                    <p class="date"></p>
                </div>
                <div class="date-counting">
                    <span class="count"></span>
                    day
                </div>
                <div class="project-state">In Cultivate Stage</div>
            </div>
        </div>
        <p class="create-group">
            If you are not applying support for this project, please first
            <span class="btn-create" tapmode onclick="createNewProject()">add new project</span>
        </p>
    </div>
</div>

<div class="propose">
    <div class="propose-title border-1px-top border-1px-bottom">
        Please fill in the table below
    </div>
    
    <div class="form">
		<div class="form-group clearfix">
    		<label class="pull-left important">Name</label>
    		<input class="edc-name form-text-right" type="text" placeholder="Required">
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left">Company Email Address</label>
    		<input class="edc-email form-text-right" type="text" placeholder="Company Email Address">
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left">CNDA（CNDA）</label>
    		<input class="edc-cnda form-text-right" type="text" placeholder="Default">
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left">Title</label>
    		<span class="edc-job form-text-right" tapmode onclick="getJob(this)">---Select---</span>
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left">Industry</label>
    		<span class="edc-industry form-text-right ellipsis-1" tapmode onclick="getIndustry()">---Select---</span>
    	</div>
        <div class="form-group clearfix">
            <label class="pull-left important">Company Name</label>
            <input class="edc-company-name form-text-right" type="text" placeholder="">
        </div>
    	<div class="form-group clearfix">
    		<label class="pull-left important">Company Address</label>
    		<input class="edc-address-en form-text-right" type="text" placeholder="Company English Address">
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left important">Company Address</label>
    		<input class="edc-address-zh form-text-right" type="text" placeholder="Company Chinese Address">
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left important">Contact Number</label>
    		<input class="edc-company-tel form-text-right" type="tel" placeholder="Required">
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left important">Postcode</label>
    		<input class="edc-postcode form-text-right" type="tel" placeholder="Required">
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left important">Province</label>
    		<span class="edc-province form-text-right" tapmode onclick="getProvince(this)">---Select---</span>
    	</div>
    	<div class="form-group clearfix">
    		<label class="pull-left important">City</label>
    		<span class="edc-city form-text-right" tapmode onclick="getCity(this)">---Select---</span>
    	</div>
    </div>

	<div class="form no-padded">
    	<p class="form-title">
    		Do you want us to contact with you?
    	</p>
    	<p class="form-title-desc">
    		Contact with me within 2 working days to discuss my embedded project.
    	</p>
    	<div class="form-group border-1px-top clearfix">
    		<label class="edc-contact pull-left" tapmode onclick="getContact(this)">Yes, please contact with me.</label>
    	</div>
    	<div class="propose-select">
    		<div class="selectSwitch" tapmode="" onclick="toggleSwitch(this,'selectSwitch')">
	            Send the latest E-updates of Intel embedded product, design recourses, training and activities  to me.
	        </div>
    	</div>
    </div>

	<div class="clause-box">
		<p>Get the latest Intel tech information any time. Come to register ASAP!</p>
		<p>
             Click"Submit" means you agreed to our services 
			<span class="fake-link" tapmode onclick="fnOpenClause()">services</span>
		</p>
		<p>
			and privacy terms.
			<span class="fake-link" tapmode onclick="fnOpenClause()">Privacy Policy</span>
		</p>
	</div>

    <div class="btn-submit btn" tapmode onclick="submitEDC(this)">Submit</div>
    <div style="height: 1px"></div>
</div>
<div id="modal_selector" tapmode="" onclick="selectCancel()">
    <div class="select">
        <div class="select-control">
            <div class="select-control-cancel" tapmode="" onclick="selectCancel()">Cancel</div>
            <div class="select-control-placeHolder"></div>
            <div class="select-control-ok" tapmode="" onclick="selectCancel()">Done</div>
        </div>
        <div class="select-content">

        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/ajaxRequest.js"></script>
<script type="text/javascript" src="../../script/languge.js"></script>
<script type="text/javascript" src="../../script/translation.js"></script>
<script type="text/javascript">

    // 以下通用
    var account = $api.getStorage('loginInfo');
    var pageParam = {};
    var projectID = '';
    var typeid = 5;
    var UICustomPicker;
    var zhuge;
    apiready = function () {
        pageParam = api.pageParam;
        projectID = pageParam.id;
        zhuge = api.require('zhuge');
        if (zhuge) {
            zhuge.initZhuge();
        }
        getProjectDetail();
        getProjectDesigner();
        getFormInfo();
        UICustomPicker = api.require('UICustomPicker');

        api.addEventListener({
            name: 'getIndustrys'
        }, function(ret, err){
            var industry = ret.value.industry;
            $api.text($api.dom('.edc-industry'), industry);
        });

    };

    function getProjectDesigner(){
        ajaxRequest('/APPSupportManage/GetSupportAppraise.aspx', 'get', {
            UserID: account.userid,
            BatchNo: account.batchno, 
            SupportTypeID: typeid
        }, function(ret, err){
            if(ret && ret.res == undefined){
                // console.log('ret:normal===='+ JSON.stringify(ret));
                var data = ret.appdatalist[0];
                $api.html($api.dom('.designer'), data.UserName);
                
                var len = parseInt(data.EvaluateNumber);
                var str = '';
                for (var i = 0; i < len; i++) {
                    str+= '<i class="fa-star fa"></i>';
                }
                $api.html($api.dom('.stars'), str);
                $api.html($api.domAll('.rank .text')[1], '('+ data.UserNum +'Person)');
            } else{
                console.log('ret:err===='+ JSON.stringify(ret));
            }
            if (err) {
                console.log('err===='+ JSON.stringify(err));
            }

        });
        
    };

    function getProjectDetail(){
        ajaxRequest('/APPProjectManage/APPGetProjectDetail.aspx', 'get', {
            UserID: account.userid,
            BatchNo: account.batchno,
            ProjectID: projectID
        }, function(ret, err){
            if(ret && ret.res == undefined){
                var data = ret.appdatalist[0];
                $api.html($api.dom('.project-header .header-inner .name'), data.ProjectName);
                $api.html($api.dom('.project-header .header-inner .date'), data.CreateDate);
                $api.html($api.dom('.project-header .header-inner .count'), data.ProjectStartDay);
                $api.html($api.dom('.project-header .header-inner .project-state'), 'In '+ ( fnTranslation(data.ProjectStatus, true) ) +' stage');
                
                // In Cultivate Stage
                
                
            } else{
                console.log('ret:err===='+ JSON.stringify(ret));
            }
            if (err) {
                console.log('err===='+ JSON.stringify(err));
            }
        });
    };
    // 以上通用

    function toggleSwitch(obj,clz){
        var $selectSwitch = $api.domAll('.'+clz);
        var reg = /radio/g;
        if (reg.test(clz)) {
        	for(var i=0;i<$selectSwitch.length;i++){
	            $api.removeCls($selectSwitch[i],'show');
	        }
        } else {

        }
        if($api.hasCls(obj,'show')){
            $api.removeCls(obj,'show');
        }else{
            $api.addCls(obj,'show');
        }
    };

    // 获取表单信息
    function getFormInfo(){
        ajaxRequest('/APPSupportManage/APPGetSupportUserInfo.aspx', 'get', {
            UserID: account.userid,
            BatchNo: account.batchno
        }, function(ret, err){
            if (ret && ret.res == undefined) {
                // console.log('ret:normal===='+ JSON.stringify(ret));
                var data = ret.appdatalist[0];
                // data.RealName && $api.val($api.dom('.edc-name'), data.RealName);
                // data.Email && $api.val($api.dom('.edc-email'), data.Email);
                data.CNDA && $api.val($api.dom('.edc-cnda'), data.CNDA);
                // data.Profession && $api.text($api.dom('.edc-job'), data.Profession);
                // $api.text($api.dom('.edc-industry'));
                data.CompanyFullName && $api.val($api.dom('.edc-company-name'), data.CompanyFullName);
                data.CompanyAddressEnglish && $api.val($api.dom('.edc-address-en'), data.CompanyAddressEnglish);
                data.CompanyAddressChinese && $api.val($api.dom('.edc-address-zh'), data.CompanyAddressChinese);
                data.OfficePhone && $api.val($api.dom('.edc-company-tel'), data.OfficePhone);
                data.PostalCode && $api.val($api.dom('.edc-postcode'), data.PostalCode);
                // data.CompanyFullName;
                // data.CompanyEnglish;
                // data.CompanyFullNameNew;
                // data.CompanyAddressChinese;
                // data.CompanyAddressEnglish;
                // data.CNDA;
                // data.CompanyFullNameNew;
                // data.CompanyWebSite;
                // data.OfficePhone;
                // data.PostalCode;
                // data.UserId;
            } else {
                api.toast({
	global: true,
                    msg: JSON.stringify(ret),
                    duration: 2000,
                    location: 'middle'
                });
            }
            if (err) {
                api.toast({
	global: true,
                    msg: JSON.stringify(err),
                    duration: 2000,
                    location: 'bottom'
                });
            }
        });
    };

    // 获取职位
    function getJob(el){
        var data = $api.getStorage('APPGetPositionList');
        if (api.connectionType == 'none') {
            if (data) {
                openSelector(el, data);
            } else {
                api.toast({
	global: true,
                    msg: 'The information hasn\'t been obtained.',
                    duration: 2000,
                    location: 'middle'
                });
            }
            
        } else{
            ajaxRequest('/APPGetDataType/APPGetPositionList.aspx', 'get', {
                UserID: account.userid,
                BatchNo: account.batchno
            }, function(ret, err){
                // 职位Value CommonValue
                // 职位名称 CommonName
                if (ret && ret.res == undefined) {
                // console.log('ret:normal===='+ JSON.stringify(ret));
                    var data = ret.appdatalist;

                    var scope = [];
                    for (var i = 0; i < data.length; i++) {
                        scope.push({
                            value: fnTranslation( data[i].CommonName, true ),
                            id: data[i].CommonValue
                        });
                    }
                    $api.setStorage('APPGetPositionList', scope);
                    openSelector(el, scope);

                } else {
                    api.toast({
	global: true,
                        msg: JSON.stringify(ret),
                        duration: 2000,
                        location: 'middle'
                    });
                }
                if (err) {
                    api.toast({
	global: true,
                        msg: JSON.stringify(err),
                        duration: 2000,
                        location: 'bottom'
                    });
                }
            });
        }
            
    };
    // 获取行业
    function getIndustry(){
        var move = isHuawei();
        var animation = {};
        if (move) {
            animation = {
                type: 'movein',
                subType: 'from_right'
            }            
        }
        api.openWin({
            name: 'edc_choose_industry_win',
            url: 'widget://' + DIR + '/simple_page/simple_win.html',
            bounces: false,
            pageParam: {
                name: 'edc_choose_industry',
                title: fnLanguageSwitch('EDC特权帐号'),
                bounces: false
            },
            animation: animation
        });
    };
    // 获取省份
    function getProvince(el){
        var data = $api.getStorage('APPGetProvinceList');
        if (api.connectionType == 'none') {
            if (data) {
                openSelector(el, data);
            } else {
                api.toast({
	global: true,
                    msg: 'The information hasn\'t been obtained.',
                    duration: 2000,
                    location: 'middle'
                });
            }
            
        } else{
            ajaxRequest('/APPGetDataType/APPGetProvinceList.aspx', 'get', {
                UserID: account.userid,
                BatchNo: account.batchno
            }, function(ret, err){
                // 省份ID    ProvinceID
                // 省份简称    ProvinceName
                // 省份全称    ProvinceFullName
                if (ret && ret.res == undefined) {
                // console.log('ret:normal===='+ JSON.stringify(ret));
                    var data = ret.appdatalist;

                    var scope = [];
                    for (var i = 0; i < data.length; i++) {
                        scope.push({
                            value: data[i].ProvinceFullName,
                            id: data[i].ProvinceID
                        });
                    }
                    $api.setStorage('APPGetProvinceList', scope);
                    openSelector(el, scope);

                } else {
                    api.toast({
	global: true,
                        msg: JSON.stringify(ret),
                        duration: 2000,
                        location: 'middle'
                    });
                }
                if (err) {
                    api.toast({
	global: true,
                        msg: JSON.stringify(err),
                        duration: 2000,
                        location: 'bottom'
                    });
                }
            });
        }
    };
    // 获取城市
    function getCity(el){
        // $api.getStorage('key');
        var ProvinceID = '';
        if ($api.trim($api.text($api.dom('.edc-province'))) == '---Select---') {
            api.alert({
                title: '', 
                msg: 'Please Select Person',
                        buttons: ['I got it.']

            });
            return false;
        } else {
            ProvinceID = $api.trim($api.text($api.dom('.edc-province')));
        }
        var data = $api.getStorage('APPGetCityByProvince-'+ ProvinceID);
        if (api.connectionType == 'none') {
            if (data) {
                openSelector(el, data);
            } else {
                api.toast({
	global: true,
                    msg: 'The information hasn\'t been obtained.',
                    duration: 2000,
                    location: 'middle'
                });
            }
            
        } else{
            ajaxRequest('/APPGetDataType/APPGetCityByProvince.aspx', 'get', {
                UserID: account.userid,
                BatchNo: account.batchno,
                ProvinceID: ProvinceID
            }, function(ret, err){
                // 城市ID    CityId
                // 省份ID    ProvinceId
                // 城市全称  CityFullName
                if (ret && ret.res == undefined) {
                // console.log('ret:normal===='+ JSON.stringify(ret));
                    var data = ret.appdatalist;

                    var scope = [];
                    for (var i = 0; i < data.length; i++) {
                        scope.push({
                            value: data[i].CityFullName,
                            id: data[i].CityId
                        });
                    }
                    $api.setStorage('APPGetCityByProvince-'+ ProvinceID, scope);
                    openSelector(el, scope);
                } else {
                    api.toast({
	global: true,
                        msg: JSON.stringify(ret),
                        duration: 2000,
                        location: 'middle'
                    });
                }
                if (err) {
                    api.toast({
	global: true,
                        msg: JSON.stringify(err),
                        duration: 2000,
                        location: 'bottom'
                    });
                }
            });
        }
    };

    // 获取是否联系我们
    function getContact(el){
        var scope = ['Yes, please contact with me.', ' No, please don\'t contact with me.'];
        var UICustomPicker = api.require('UICustomPicker');
        UICustomPicker.open({
            rect: {
                x: 0,
                y: api.winHeight/3,
                h: api.winHeight/3
            },
            styles: {
                bg: 'rgba(0,0,0,0.5)',
                normalColor: '#959595',
                selectedColor: '#fff',
                selectedSize: 28,
                tagColor: '#3685dd',
                tagSize: 10
            },
            data: [{
                scope: scope
            }],
            autoHide: false,
            rows: 3,
            fixedOn: api.frameName,
            fixed: true
        }, function( ret, err ){
            if(ret){
                // console.log( JSON.stringify( ret ) );
                if (ret.eventType == 'selected') {
                    $api.html(el, ret.data[0]);
                    // $api.attr(el, 'data-id', dataJson[ret.data[0]]);
                    UICustomPicker.close({
                        id: ret.id
                    });
                }
            }
        });
    };
    // 打开两个远程地址
    function fnOpenClause() {
        var move = isHuawei();
        var animation = {};
        if (move) {
            animation = {
                type: 'movein',
                subType: 'from_right'
            }           
        }
        var url = 'https://ccechina.intel.com/SystemManage/ProceduralClause.aspx';
        api.openWin({
            name: 'web_clause_win',
            url: 'widget://' + DIR + '/web_page/web_win.html',
            bounces: false,
            vScrollBarEnabled: false,
            hScrollBarEnabled: false,
            pageParam: {
                title: 'Terms of Service and Privacy',
                url: url
            },
            animation: animation
        });
    };


    // 提交EDC
    var submitLock = false;
    function isEmepty(str){
        if (str == undefined || str == null) {
            return true;
        } else {}
        if ($api.trim(str) == '' || $api.trim(str) == '---Select---') {
            return true;
        } else {
            return false;
        }
    };

    function submitEDC(el){

        var Name = $api.trim($api.val($api.dom('.edc-name')));
        if (isEmepty(Name)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please input your name',
                                        buttons: ['OK']

            });
            return false;
        }
        var Email = $api.trim($api.val($api.dom('.edc-email')));
        if (isEmepty(Email)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please fill in E-mail address containing domain name of company',
                                        buttons: ['OK']

            });
            return false;
        }
        var Postion = $api.trim($api.text($api.dom('.edc-job')));
        if (isEmepty(Postion)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please Select your position',
                                        buttons: ['OK']

            });
            return false;
        }
        var ProjectProduct = $api.trim($api.text($api.dom('.edc-industry')));
        if (isEmepty(ProjectProduct)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please Select your industry',
                                        buttons: ['OK']

            });
            return false;
        }
        var CompanyName = $api.trim($api.val($api.dom('.edc-company-name')));
        if (isEmepty(CompanyName)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please fill in Company Name',
                                        buttons: ['OK']

            });
            return false;
        }
        var CompanyEnglishAddress = $api.trim($api.val($api.dom('.edc-address-en')));
        if (isEmepty(CompanyEnglishAddress)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please fill in Company Address in English',
                                        buttons: ['OK']

            });
            return false;
        }
        var CompanyAddress = $api.trim($api.val($api.dom('.edc-address-zh')));
        if (isEmepty(CompanyAddress)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please fill in Company Address in Chinese',
                                        buttons: ['OK']

            });
            return false;
        }
        var CompanyTel = $api.trim($api.val($api.dom('.edc-company-tel')));
        if (isEmepty(CompanyTel)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please fill in Tel.',
                                        buttons: ['OK']

            });
            return false;
        }
        var PostCode = $api.trim($api.val($api.dom('.edc-postcode')));
        if (isEmepty(PostCode)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please fill in Postcode',
                                        buttons: ['OK']

            });
            return false;
        }
        var Province = $api.trim($api.text($api.dom('.edc-province')));
        if (isEmepty(Province)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please Select Person',
                                        buttons: ['OK']

            });
            return false;
        }
        var City = $api.trim($api.text($api.dom('.edc-city')));
        if (isEmepty(City)) {
            api.alert({
                title: 'Notice', 
                msg: 'Please Select City',
                                        buttons: ['OK']
                
            });
            return false;
        }
        var IfContactMe = $api.trim($api.text($api.dom('.edc-contact')));

        var IfSendData = $api.domAll('.selectSwitch.show').length;

        var data = {
            Name: Name,
            Email: Email,
            Postion: fnTranslation( Postion ),
            ProjectProduct: ProjectProduct,
            CompanyName: CompanyName,
            CompanyEnglishAddress: CompanyEnglishAddress,
            CompanyAddress: CompanyAddress,
            CompanyTel: CompanyTel,
            PostCode: PostCode,
            Province: Province,
            City: City,
            IfContactMe: IfContactMe,
            IfSendData: IfSendData,
        }
        // console.log(data)
        if (submitLock) {
            return false;
        } else {
            submitLock = true;
            $api.attr(el, 'disabled', 'disabled');
        }
        if (zhuge) {
            zhuge.track({
                eventName: '项目支持_技术支持提交按钮',
                eventPro: {
                    '模块来源': 'EDC特权帐号'
                }
            });
        }
        // codes there
        ajaxRequest('/APPSupportManage/APPSupportAccountOpenUp.aspx', 'post', {
            UserID: account.userid,
            BatchNo: account.batchno,
            ItemNameID: projectID,
            Name: Name,
            Email: Email,
            Postion: Postion,
            ProjectProduct: ProjectProduct,
            CompanyName: CompanyName,
            CompanyEnglishAddress: CompanyEnglishAddress,
            CompanyAddress: CompanyAddress,
            CompanyTel: CompanyTel,
            PostCode: PostCode,
            Province: Province,
            City: City,
            IfContactMe: IfContactMe,
            IfSendData: IfSendData,
        }, function(ret, err){
            submitLock = false;
            $api.removeAttr(el, 'disabled');
            if(ret && ret.res){
                // console.log('ret:normal===='+ JSON.stringify(ret));
                api.toast({
	global: true,
                    msg: 'EDC A/C has been submitted successfully.',
                    duration: 2000,
                    location: 'middle'
                });
                setTimeout(function(){
                    api.closeWin();
                },2000);
            } else{
                api.toast({
	global: true,
                    msg: JSON.stringify(ret),
                    duration: 2000,
                    location: 'middle'
                });
            }
            if (err) {
                api.toast({
	global: true,
                    msg: JSON.stringify(err),
                    duration: 2000,
                    location: 'middle'
                });
            }
        });
    };


    // 调用selector
    var UICustomPickerElement,
        UICustomPickerId,
        selectorValue,
        selectorId,
        blurInput = $api.domAll('input'),
        blurText = $api.domAll('textarea');

    function openSelector(el, data){
        for (var i = 0; i < blurInput.length; i++) {
            blurInput[i].blur();
        }
        for (var j = 0; j < blurText.length; j++) {
            blurText[j].blur();
        }
        var scope = data;
        UICustomPickerElement = el;
        $api.addCls($api.dom('body'), 'selector-modal-show');
        var UICustomPickerContentOffset = $api.offset($api.dom('.select-content'));

        UICustomPicker.open({
            rect: {
                x: 0,
                y: api.frameHeight - UICustomPickerContentOffset.h,
                h: UICustomPickerContentOffset.h
            },
            styles: {
                bg: 'rgba(0,0,0,0)',
                normalColor: '#959595',
                selectedColor: '#3685dd',
                selectedSize: 30,
                tagColor: '#3685dd',
                tagSize: 10
            },
            data: [{
                scope: scope
            }],
            autoHide: false,
            rows: 5,
            fixedOn: api.frameName,
            fixed: true
        }, function( ret, err ){
            UICustomPickerId = ret.id;
            if(ret){
                // console.log( JSON.stringify( ret ) );
                if(ret.eventType=='show'){
                    selectorValue = scope[0].value;
                    selectorId = scope[0].id;
                }else{
                    selectorValue = ret.data[0].value;
                    selectorId = ret.data[0].id;
                }
                selectOK();
            }
        });
    };
    function selectCancel() {
        UICustomPicker.close({
            id: UICustomPickerId
        });
        $api.removeCls($api.dom('body'), 'selector-modal-show');
        if( event ){event.cancelBubble = true;}
        return false;
    };

    function selectOK() {
        if (UICustomPickerElement.tagName.toLowerCase() == 'input') {
            $api.val(UICustomPickerElement, selectorValue);
            $api.attr(UICustomPickerElement, 'data-selectorid', selectorId);
        } else {
            $api.html(UICustomPickerElement, selectorValue);
            $api.attr(UICustomPickerElement, 'data-selectorid', selectorId);
        }
        if( event ){
        	if( event ){event.cancelBubble = true;}
        }
        return false;
    };
</script>
</html>